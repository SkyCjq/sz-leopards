---
title: Python Custom Integration
sidebarTitle: Custom
---

Even if you have your own custom setup for calling LLMs and do not use any of the other integrations supported by LangWatch, you can still use our Python SDK to help integrate with LangWatch.

import Prerequisites from "/snippets/prerequests.mdx";

<Prerequisites />

Usage:
Wrap your First wrap your LLM call with the `BaseContextTracer` to guarantee trace collection in the background at the end of the block:

```python
import langwatch.tracer
from langwatch.types import LLMSpan

with langwatch.tracer.BaseContextTracer(
  trace_id=nanoid.generate(), metadata={
    "user_id": "optional-user-123",
    "thread_id": "optional-thread-456",
  }
) as tracer:
  # Your LLM call here
```

Then, you will have to capture the timestamps, the inputs and outputs, and create one or more spans using tracer.append_span().

```python
import langwatch.tracer
from langwatch.types import LLMSpan

with langwatch.tracer.BaseContextTracer(
  trace_id=nanoid.generate(), metadata={
    "user_id": "optional-user-123",
    "thread_id": "optional-thread-456",
  }
) as tracer:
  started_at_ts = int(time.time() * 1000)  # time must be in milliseconds

  time.sleep(1)  # generating the message...

  generated_message = "Hello there! How can I help?"

  tracer.append_span(
      LLMSpan(
          type="llm",
          span_id=nanoid.generate(),
          model="llama2",
          input={
              "type": "chat_messages",
              "value": [
                  {"role": "user", "content": message.content},
              ],
          },
          outputs=[
              {
                  "type": "chat_messages",
                  "value": [
                      {
                          "role": "assistant",
                          "content": generated_message,
                      }
                  ],
              }
          ],
          timestamps={
              "started_at": started_at_ts,
              "finished_at": int(time.time() * 1000),
          },
      )
  )
```

import Metadata from "/snippets/metadata.mdx";

<Metadata />
