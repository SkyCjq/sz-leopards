---
title: Azure OpenAI Python
---

To integrate LangWatch with Azure OpenAI's GPT models using Python, follow these steps:

import Prerequisites from "/snippets/prerequests.mdx";

<Prerequisites />

Usage:
Use the `AzureOpenAITracer` context manager, passing the AzureOpenAI instance to it to automatically trace all interactions within its block

```python
import langwatch.openai
from openai import OpenAI

client = AzureOpenAI(
  api_key=os.getenv("AZURE_OPENAI_API_KEY"),
  api_version="2024-02-01",
  azure_endpoint=os.getenv("AZURE_OPENAI_ENDPOINT"),
)

# Use the LangWatch tracer for the OpenAI model
with langwatch.openai.AzureOpenAITracer(
  client,
  metadata={
      "user_id": "optional-user-123",
      "thread_id": "optional-thread-456",
  },
):
    # Your interaction with OpenAI's API
    completion = client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a helpful assistant."},
            {"role": "user", "content": "Tell me a joke about elephants."},
        ]
    )
```

This will trace all spans within the block. Spans are created for each API call made to Azure during the lifecycle of a trace.

import Metadata from "/snippets/metadata.mdx";

<Metadata />
